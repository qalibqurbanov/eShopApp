@model CategoryViewModel

<div class="row">
    <div class="col-md-12 text-center">
        <h1 class="text-info">Edit Category</h1>
    </div>

    <hr />

    <div class="col-md-4">
        <form asp-controller="Admin" asp-action="EditCategory" method="post">
            @* type="hidden" atributuna sahib inputlar ve ya bawqa sozle form-un gizli uzvleri, sehifede(View) gizli bir wekilde usere gostermeyerek data saxlamaq ucundur. *@

            @* Bu hidden inputu niye yaratdim? : Editlenecek olan datani View-ya dawiyiriq 'CategoryViewModel' komeyile. Lakin, admin Editleme sehifesinde datalari editledikde sonra POST etdiyi zaman hansi ID-ye sahib elementi editlediyinide bilmeli ve actionada gondermeliyik. Bu sebeble form post olunanda diger melumatlarla(cat name) yanawi 'CategoryID'-de gonderilecek ve belece Action terefde editlenecek olan kateqoriya haqqinda lazimi melumatlara sahib olmuw olacayiq, yeni artiq rahatliqla deye bileceyik ki, admin filan ID-ye sahib kateqoriyanin melumatlarini Editledi: *@
            <input type="hidden" name="CategoryID" value="@Model.CategoryID" />

            <div class="form-group row mb-2">
                <label class="col-sm-2 col-form-label" asp-for="CategoryName"></label>
                <div class="col-sm-10">
                    <input type="text" class="form-control" asp-for="CategoryName">
                </div>
            </div>

            <div class="form-group row">
                <div class="col-sm-10 offset-sm-2 d-flex justify-content-end">
                    <button type="submit" class="btn btn-primary">Edit Category</button>
                </div>
            </div>
        </form>
    </div>

    <div class="col-md-8 border">
        <div class="row">
            <div class="col-md-12 mt-4 text-center">
                <h1 class="text-info">Products in "@Model.CategoryName" category:</h1>
            </div>

            <hr />

            <table class="table table-bordered table-striped">
                <thead>
                    <tr class="text-success">
                        <td style="width: 50px;" class="text-center">ID</td>
                        <td style="width: 100px;" class="text-center">Image</td>
                        <td class="text-center">Name</td>
                        <td style="width: 200px;" class="text-center">Operation</td>
                    </tr>
                </thead>
                <tbody>
                    @if (Model.Products.Count == 0)
                    {
                        <tr>
                            <td colspan="4">
                                <div class="alert alert-warning">
                                    <h3>No Products...</h3>
                                </div>
                            </td>
                        </tr>
                    }
                    else
                    {
                        @foreach (Product prod in Model.Products)
                        {
                            <tr>
                                <td class="text-center">@prod.ProductID</td>
                                <td class="text-center"><img src="~/img/ProductImages/@prod.ProductImageName" width="50%"></td>
                                <td class="text-center">@prod.ProductName</td>
                                <td class="text-center">
                                    <form action="/admin/deleteproductfromcategory" method="post" class="d-inline-block mt-2">
                                        @* Her bir form icerisinde sileceyim mehsulun ID-sini saxlayiram userden gizli bir wekilde (ki, form POST olunanda bu ID-nide gonderim actiona): *@
                                        <input type="hidden" name="prodID" value="@prod.ProductID">
                                        <input type="hidden" name="catID" value="@Model.CategoryID">

                                        <button type="submit" class="btn btn-danger form-control-sm"><i class="fa-regular fa-trash-can"></i> Delete from "@Model.CategoryName" category</button>
                                    </form>
                                </td>
                            </tr>
                        }
                    }
                </tbody>
            </table>
        </div>
    </div>
</div>